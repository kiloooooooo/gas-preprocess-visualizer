var De=Object.defineProperty;var Ie=(s,e,r)=>e in s?De(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var W=(s,e,r)=>Ie(s,typeof e!="symbol"?e+"":e,r);import{a as E,t as A,c as le}from"../chunks/disclose-version.D_qvnWWV.js";import{i as te}from"../chunks/legacy.uyi8_elg.js";import{a5 as Ne,D as Re,E as R,J as ie,F as He,C as Ce,am as ke,H as Me,I as me,K as oe,O as Y,ao as Z,L as Ee,M as $e,N as Le,z as he,ap as be,aq as Pe,al as Fe,ar as Ke,a4 as Oe,a6 as qe,ai as Be,aa as ze,ac as Ue,as as de,at as fe,a3 as Ve,v as ge,au as Te,av as Ye,aw as Je,ag as Xe,B as Ge,ax as Qe,p as ae,ay as O,az as ve,a as se,b as N,c as k,r as x,t as F,i as p,aA as C,x as M,f as j,k as We,a1 as Ze}from"../chunks/runtime.DoxcbQZc.js";import{s as ue,e as ce,d as we,a as z,b as re}from"../chunks/store.D0En3EQS.js";import{w as Se}from"../chunks/index.CJCV-yYx.js";import{i as pe,p as je}from"../chunks/props.DCY8cd27.js";function q(s,e){return e}function er(s,e,r,n){for(var a=[],d=e.length,l=0;l<d;l++)Pe(e[l].e,a,!0);var _=d>0&&a.length===0&&r!==null;if(_){var m=r.parentNode;Fe(m),m.append(r),n.clear(),H(s,e[0].prev,e[d-1].next)}Ke(a,()=>{for(var h=0;h<d;h++){var c=e[h];_||(n.delete(c.k),H(s,c.prev,c.next)),Oe(c.e,!_)}})}function B(s,e,r,n,a,d=null){var l=s,_={flags:e,items:new Map,first:null},m=(e&Te)!==0;if(m){var h=s;l=R?ie(qe(h)):h.appendChild(Ne())}R&&He();var c=null,f=!1;Re(()=>{var t=r(),i=Ce(t)?t:t==null?[]:ke(t),o=i.length;if(f&&o===0)return;f=o===0;let b=!1;if(R){var g=l.data===Me;g!==(o===0)&&(l=me(),ie(l),oe(!1),b=!0)}if(R){for(var w=null,$,y=0;y<o;y++){if(Y.nodeType===8&&Y.data===Be){l=Y,b=!0,oe(!1);break}var v=i[y],u=n(v,y);$=Ae(Y,_,w,null,v,u,y,a,e),_.items.set(u,$),w=$}o>0&&ie(me())}if(!R){var U=ze;rr(i,_,l,a,e,(U.f&Z)!==0,n)}d!==null&&(o===0?c?Ee(c):c=$e(()=>d(l)):c!==null&&Le(c,()=>{c=null})),b&&oe(!0),r()}),R&&(l=Y)}function rr(s,e,r,n,a,d,l){var J,X,K,G;var _=(a&Ye)!==0,m=(a&(de|fe))!==0,h=s.length,c=e.items,f=e.first,t=f,i,o=null,b,g=[],w=[],$,y,v,u;if(_)for(u=0;u<h;u+=1)$=s[u],y=l($,u),v=c.get(y),v!==void 0&&((J=v.a)==null||J.measure(),(b??(b=new Set)).add(v));for(u=0;u<h;u+=1){if($=s[u],y=l($,u),v=c.get(y),v===void 0){var U=t?t.e.nodes_start:r;o=Ae(U,e,o,o===null?e.first:o.next,$,y,u,n,a),c.set(y,o),g=[],w=[],t=o.next;continue}if(m&&tr(v,$,u,a),v.e.f&Z&&(Ee(v.e),_&&((X=v.a)==null||X.unfix(),(b??(b=new Set)).delete(v))),v!==t){if(i!==void 0&&i.has(v)){if(g.length<w.length){var L=w[0],T;o=L.prev;var P=g[0],D=g[g.length-1];for(T=0;T<g.length;T+=1)xe(g[T],L,r);for(T=0;T<w.length;T+=1)i.delete(w[T]);H(e,P.prev,D.next),H(e,o,P),H(e,D,L),t=L,o=D,u-=1,g=[],w=[]}else i.delete(v),xe(v,t,r),H(e,v.prev,v.next),H(e,v,o===null?e.first:o.next),H(e,o,v),o=v;continue}for(g=[],w=[];t!==null&&t.k!==y;)(d||!(t.e.f&Z))&&(i??(i=new Set)).add(t),w.push(t),t=t.next;if(t===null)continue;v=t}g.push(v),o=v,t=v.next}if(t!==null||i!==void 0){for(var I=i===void 0?[]:ke(i);t!==null;)(d||!(t.e.f&Z))&&I.push(t),t=t.next;var V=I.length;if(V>0){var ne=a&Te&&h===0?r:null;if(_){for(u=0;u<V;u+=1)(K=I[u].a)==null||K.measure();for(u=0;u<V;u+=1)(G=I[u].a)==null||G.fix()}er(e,I,ne,c)}}_&&Ue(()=>{var Q;if(b!==void 0)for(v of b)(Q=v.a)==null||Q.apply()}),he.first=e.first&&e.first.e,he.last=o&&o.e}function tr(s,e,r,n){n&de&&be(s.v,e),n&fe?be(s.i,r):s.i=r}function Ae(s,e,r,n,a,d,l,_,m){var h=(m&de)!==0,c=(m&Je)===0,f=h?c?Ve(a):ge(a):a,t=m&fe?ge(l):l,i={i:t,v:f,k:d,a:null,e:null,prev:r,next:n};try{return i.e=$e(()=>_(s,f,t),R),i.e.prev=r&&r.e,i.e.next=n&&n.e,r===null?e.first=i:(r.next=i,r.e.next=i.e),n!==null&&(n.prev=i,n.e.prev=i.e),i}finally{}}function xe(s,e,r){for(var n=s.next?s.next.e.nodes_start:r,a=e?e.e.nodes_start:r,d=s.e.nodes_start;d!==n;){var l=Xe(d);a.before(d),d=l}}function H(s,e,r){e===null?s.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function ar(s,e,r,n){var a=s.__attributes??(s.__attributes={});if(R){a[e]=s.getAttribute(e);return}a[e]!==(a[e]=r)&&(r==null?s.removeAttribute(e):typeof r!="string"&&sr(s).includes(e)?s[e]=r:s.setAttribute(e,r))}var ye=new Map;function sr(s){var e=ye.get(s.nodeName);if(e)return e;ye.set(s.nodeName,e=[]);for(var r,n=s,a=Element.prototype;a!==n;){r=Qe(n);for(var d in r)r[d].set&&e.push(d);n=Ge(n)}return e}const _e=Se(void 0),ee=Se({kind:"amp",processRange:60});var nr=A("<option> </option>"),ir=A("<option> </option>"),or=A('<div><h3 class="mb-4 mt-8 text-xl">処理の種類</h3> <p>"amp"，"phase"等，各シーンのディレクトリ直下にあるディレクトリ名を指定します．</p> <select class="mt-4 border-2 p-2"></select> <h3 class="mb-4 mt-8 text-xl">処理枚数</h3> <p>処理に使用した画像枚数を指定します．</p> <select class="mt-4 border-2 p-2"></select></div>');function lr(s,e){ae(e,!1);const r=ue(),n=()=>re(_e,"$sceneEntries",r),a=()=>re(ee,"$imageType",r);let d=C([]),l=C([]);function _(t){const{target:i}=t;i instanceof HTMLSelectElement&&we(ee,{...a(),kind:i.value})}function m(t){const{target:i}=t;i instanceof HTMLSelectElement&&we(ee,{...a(),processRange:Number(i.value.slice(0,-1))})}O(()=>n(),()=>{(async()=>{var b;if(!n())return;const t=(b=n())==null?void 0:b[0];let i=new Set,o=new Set;for await(let[g,w]of t==null?void 0:t.entries())if(w.kind==="directory"&&!w.name.startsWith("original")){i.add(g);for await(let[$,y]of w.entries()){if(y.kind!=="file")continue;const v=$.match(/(\d+)(\.\w+)$/),u=v?Number(v[1]):null;u&&o.add(u)}}M(d,[...i]),M(l,[...o].toSorted((g,w)=>g-w))})()}),ve(),te();var h=or(),c=N(k(h),4);B(c,5,()=>p(d),q,(t,i)=>{var o=nr(),b={},g=k(o,!0);x(o),F(()=>{b!==(b=p(i))&&(o.value=(o.__value=p(i))==null?"":p(i)),z(g,p(i))}),E(t,o)}),x(c);var f=N(c,6);B(f,5,()=>p(l),q,(t,i)=>{var o=ir(),b=k(o);x(o),F(()=>z(b,`${p(i)??""}枚`)),E(t,o)}),x(f),x(h),ce("input",c,_),ce("input",f,m),E(s,h),se()}var cr=A("<p> </p>"),dr=A('<div class="flex items-center gap-x-4"><button class="border-2 p-2 transition hover:border-blue-700 hover:bg-blue-500 hover:text-white">ディレクトリを開く</button> <!></div>');function fr(s,e){ae(e,!1);let r=C();async function n(){if(!window.showDirectoryPicker){alert("window.showDirectoryPickerが使用できません");return}if(M(r,await window.showDirectoryPicker()),!p(r)){alert("window.showDirectoryPickerがundefinedを返しました．ディレクトリを開けません");return}let m=[];for await(let h of p(r).values())h.kind==="directory"&&m.push(h);_e.set(m)}te();var a=dr(),d=k(a),l=N(d,2);{var _=m=>{var h=cr(),c=k(h);x(h),F(()=>z(c,`開いたディレクトリ: ${p(r).name??""}`)),E(m,h)};pe(l,m=>{p(r)&&m(_)})}x(a),ce("click",d,n),E(s,a),se()}class S{constructor(e,r,n){W(this,"distance");W(this,"bgTemp");W(this,"flow");this.distance=e,this.bgTemp=r,this.flow=n}encodeString(){return`${this.distance}_${this.bgTemp}_${this.flow}`}static decodeString(e){const[r,n,a]=e.split("_");return new S(r,n,a)}static parseDirName(e){let r="",n="(不明)",a="(噴射なし)";const d=/([0-9.]+)(℃|L|m|Ｌ|ｍ)/g;let l;for(;(l=d.exec(e))!==null;){const _=parseFloat(l[1]),m=this.convertFull2Half(l[2]);switch(m){case"℃":n=`${_}${m}`;break;case"L":a=`${_}${m}`;break;case"m":r=`${_}${m}`;break}}return new S(r,n,a)}static convertFull2Half(e){switch(e){case"Ｌ":return"L";case"ｍ":return"m";default:return e}}}var vr=A('<div class="p-1"><img class="border border-black" alt="processed image"></div>'),ur=A('<div style="width: 320px; height: 240px; background-color: red;"></div>');function pr(s,e){ae(e,!1);const r=ue(),n=()=>re(ee,"$imageType",r);let a=je(e,"directory",8),d=C();O(()=>(We(a()),n()),()=>{(async()=>{var f;const c=await((f=a())==null?void 0:f.getDirectoryHandle(n().kind));if(!(!c||c.kind!=="directory")){for await(let[t,i]of c)if(t.match(new RegExp(`(${n().processRange})(.\\w+$)`))){if(i.kind!=="file")continue;const o=await i.getFile(),b=new FileReader;b.onload=()=>{typeof b.result=="string"&&M(d,b.result)},o&&b.readAsDataURL(o);break}console.log("complete")}})()}),ve(),te();var l=le(),_=j(l);{var m=c=>{var f=vr(),t=k(f);x(f),F(()=>ar(t,"src",p(d))),E(c,f)},h=c=>{var f=ur();E(c,f)};pe(_,c=>{a()?c(m):c(h,!1)})}E(s,l),se()}var _r=A('<td class="border-collapse border border-black p-4"> </td>'),mr=A('<td class="border-collapse border border-black"><!></td>'),hr=A('<tr class="border-collapse border"><td class="border-collapse border border-black p-4"> </td><!></tr>'),br=A('<h3 class="mb-4 mt-6 text-2xl"> </h3> <table class="table-auto border-collapse border border-black"><thead><tr class="border-collapse border border-black"><td class="border-collapse border border-black"></td><!></tr></thead><tbody></tbody></table>',1);function gr(s,e){ae(e,!1);const r=ue(),n=()=>re(_e,"$sceneEntries",r),a=C(),d=C(),l=C(),_=C();O(()=>(n(),S),()=>{var f;M(a,new Map((f=n())==null?void 0:f.map(t=>[S.parseDirName(t.name).encodeString(),t])))}),O(()=>(p(a),S),()=>{var f;M(d,[...new Set((f=p(a))==null?void 0:f.keys().map(t=>S.decodeString(t).bgTemp))])}),O(()=>(p(a),S),()=>{var f;M(l,[...new Set((f=p(a))==null?void 0:f.keys().map(t=>S.decodeString(t).flow))])}),O(()=>(p(a),S),()=>{var f;M(_,[...new Set((f=p(a))==null?void 0:f.keys().map(t=>S.decodeString(t).distance))])}),ve(),te();var m=le(),h=j(m);{var c=f=>{var t=le(),i=j(t);B(i,1,()=>p(d),q,(o,b)=>{var g=br(),w=j(g),$=k(w);x(w);var y=N(w,2),v=k(y),u=k(v),U=N(k(u));B(U,1,()=>p(l),q,(T,P)=>{var D=_r(),I=k(D,!0);x(D),F(()=>z(I,p(P))),E(T,D)}),x(u),x(v);var L=N(v);B(L,5,()=>p(_),q,(T,P)=>{var D=hr(),I=k(D),V=k(I,!0);x(I);var ne=N(I);B(ne,1,()=>p(l),q,(J,X)=>{var K=mr(),G=k(K),Q=Ze(()=>p(a).get(new S(p(P),p(b),p(X)).encodeString()));pr(G,{get directory(){return p(Q)}}),x(K),E(J,K)}),x(D),F(()=>z(V,p(P))),E(T,D)}),x(L),x(y),F(()=>z($,`背面温度${p(b)??""}`)),E(o,g)}),E(f,t)};pe(h,f=>{n()!=null&&f(c)})}E(s,m),se()}var wr=A('<div class="p-4"><h1 class="mb-4 mt-8 text-4xl">ガス前処理 結果をまとめて表示するやつ</h1> <p>ガスIR画像の前処理結果をまとめて表示します</p> <h2 class="mb-4 mt-8 text-3xl">ディレクトリを選択</h2> <p>表示対象の画像が含まれるディレクトリを選択します．</p> <div class="mt-4"><!></div> <h2 class="mb-4 mt-8 text-3xl">表示対象の選択</h2> <p>表示対象を選択します．処理に用いた画像数を指定します．</p> <div class="mt-4"><!></div> <h2 class="mb-4 mt-8 text-3xl">結果一覧</h2> <div class="mt-4"><!></div></div>');function Ar(s){var e=wr(),r=N(k(e),8),n=k(r);fr(n,{}),x(r);var a=N(r,6),d=k(a);lr(d,{}),x(a);var l=N(a,4),_=k(l);gr(_,{}),x(l),x(e),E(s,e)}export{Ar as component};
