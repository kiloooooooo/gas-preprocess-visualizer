var Ne=Object.defineProperty;var De=(s,e,r)=>e in s?Ne(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var W=(s,e,r)=>De(s,typeof e!="symbol"?e+"":e,r);import{a as $,t as T,c as _e}from"../chunks/disclose-version.D_qvnWWV.js";import{i as re}from"../chunks/legacy.uyi8_elg.js";import{a5 as Ie,D as Re,E as R,J as ne,F as He,C as Ce,am as ke,H as Me,I as me,K as ie,O as Y,ao as Z,L as $e,M as Ee,N as Le,z as be,ap as he,aq as Pe,al as Fe,ar as Ke,a4 as Oe,a6 as qe,ai as Be,aa as ze,ac as Ue,as as ce,at as de,a3 as Ve,v as ge,au as Te,av as Ye,aw as Je,ag as Xe,B as Ge,ax as Qe,p as te,ay as O,az as fe,a as ae,b as I,c as k,r as x,t as F,i as p,aA as C,x as M,k as We,f as oe,a1 as Ze}from"../chunks/runtime.DoxcbQZc.js";import{s as ve,e as le,d as we,a as z,b as ee}from"../chunks/store.D0En3EQS.js";import{w as Se}from"../chunks/index.CJCV-yYx.js";import{i as ue,p as je}from"../chunks/props.DCY8cd27.js";function q(s,e){return e}function er(s,e,r,n){for(var a=[],d=e.length,l=0;l<d;l++)Pe(e[l].e,a,!0);var _=d>0&&a.length===0&&r!==null;if(_){var m=r.parentNode;Fe(m),m.append(r),n.clear(),H(s,e[0].prev,e[d-1].next)}Ke(a,()=>{for(var b=0;b<d;b++){var c=e[b];_||(n.delete(c.k),H(s,c.prev,c.next)),Oe(c.e,!_)}})}function B(s,e,r,n,a,d=null){var l=s,_={flags:e,items:new Map,first:null},m=(e&Te)!==0;if(m){var b=s;l=R?ne(qe(b)):b.appendChild(Ie())}R&&He();var c=null,v=!1;Re(()=>{var t=r(),i=Ce(t)?t:t==null?[]:ke(t),o=i.length;if(v&&o===0)return;v=o===0;let h=!1;if(R){var g=l.data===Me;g!==(o===0)&&(l=me(),ne(l),ie(!1),h=!0)}if(R){for(var w=null,E,y=0;y<o;y++){if(Y.nodeType===8&&Y.data===Be){l=Y,h=!0,ie(!1);break}var f=i[y],u=n(f,y);E=Ae(Y,_,w,null,f,u,y,a,e),_.items.set(u,E),w=E}o>0&&ne(me())}if(!R){var U=ze;rr(i,_,l,a,e,(U.f&Z)!==0,n)}d!==null&&(o===0?c?$e(c):c=Ee(()=>d(l)):c!==null&&Le(c,()=>{c=null})),h&&ie(!0),r()}),R&&(l=Y)}function rr(s,e,r,n,a,d,l){var J,X,K,G;var _=(a&Ye)!==0,m=(a&(ce|de))!==0,b=s.length,c=e.items,v=e.first,t=v,i,o=null,h,g=[],w=[],E,y,f,u;if(_)for(u=0;u<b;u+=1)E=s[u],y=l(E,u),f=c.get(y),f!==void 0&&((J=f.a)==null||J.measure(),(h??(h=new Set)).add(f));for(u=0;u<b;u+=1){if(E=s[u],y=l(E,u),f=c.get(y),f===void 0){var U=t?t.e.nodes_start:r;o=Ae(U,e,o,o===null?e.first:o.next,E,y,u,n,a),c.set(y,o),g=[],w=[],t=o.next;continue}if(m&&tr(f,E,u,a),f.e.f&Z&&($e(f.e),_&&((X=f.a)==null||X.unfix(),(h??(h=new Set)).delete(f))),f!==t){if(i!==void 0&&i.has(f)){if(g.length<w.length){var L=w[0],S;o=L.prev;var P=g[0],N=g[g.length-1];for(S=0;S<g.length;S+=1)xe(g[S],L,r);for(S=0;S<w.length;S+=1)i.delete(w[S]);H(e,P.prev,N.next),H(e,o,P),H(e,N,L),t=L,o=N,u-=1,g=[],w=[]}else i.delete(f),xe(f,t,r),H(e,f.prev,f.next),H(e,f,o===null?e.first:o.next),H(e,o,f),o=f;continue}for(g=[],w=[];t!==null&&t.k!==y;)(d||!(t.e.f&Z))&&(i??(i=new Set)).add(t),w.push(t),t=t.next;if(t===null)continue;f=t}g.push(f),o=f,t=f.next}if(t!==null||i!==void 0){for(var D=i===void 0?[]:ke(i);t!==null;)(d||!(t.e.f&Z))&&D.push(t),t=t.next;var V=D.length;if(V>0){var se=a&Te&&b===0?r:null;if(_){for(u=0;u<V;u+=1)(K=D[u].a)==null||K.measure();for(u=0;u<V;u+=1)(G=D[u].a)==null||G.fix()}er(e,D,se,c)}}_&&Ue(()=>{var Q;if(h!==void 0)for(f of h)(Q=f.a)==null||Q.apply()}),be.first=e.first&&e.first.e,be.last=o&&o.e}function tr(s,e,r,n){n&ce&&he(s.v,e),n&de?he(s.i,r):s.i=r}function Ae(s,e,r,n,a,d,l,_,m){var b=(m&ce)!==0,c=(m&Je)===0,v=b?c?Ve(a):ge(a):a,t=m&de?ge(l):l,i={i:t,v,k:d,a:null,e:null,prev:r,next:n};try{return i.e=Ee(()=>_(s,v,t),R),i.e.prev=r&&r.e,i.e.next=n&&n.e,r===null?e.first=i:(r.next=i,r.e.next=i.e),n!==null&&(n.prev=i,n.e.prev=i.e),i}finally{}}function xe(s,e,r){for(var n=s.next?s.next.e.nodes_start:r,a=e?e.e.nodes_start:r,d=s.e.nodes_start;d!==n;){var l=Xe(d);a.before(d),d=l}}function H(s,e,r){e===null?s.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function ar(s,e,r,n){var a=s.__attributes??(s.__attributes={});if(R){a[e]=s.getAttribute(e);return}a[e]!==(a[e]=r)&&(r==null?s.removeAttribute(e):typeof r!="string"&&sr(s).includes(e)?s[e]=r:s.setAttribute(e,r))}var ye=new Map;function sr(s){var e=ye.get(s.nodeName);if(e)return e;ye.set(s.nodeName,e=[]);for(var r,n=s,a=Element.prototype;a!==n;){r=Qe(n);for(var d in r)r[d].set&&e.push(d);n=Ge(n)}return e}const pe=Se(void 0),j=Se({kind:"amp",processRange:60});var nr=T("<option> </option>"),ir=T("<option> </option>"),or=T('<div><h3 class="mb-4 mt-8 text-xl">処理の種類</h3> <p>"amp"，"phase"等，各シーンのディレクトリ直下にあるディレクトリ名を指定します．</p> <select class="mt-4 border-2 p-2"></select> <h3 class="mb-4 mt-8 text-xl">処理枚数</h3> <p>処理に使用した画像枚数を指定します．</p> <select class="mt-4 border-2 p-2"></select></div>');function lr(s,e){te(e,!1);const r=ve(),n=()=>ee(pe,"$sceneEntries",r),a=()=>ee(j,"$imageType",r);let d=C([]),l=C([]);function _(t){const{target:i}=t;i instanceof HTMLSelectElement&&we(j,{...a(),kind:i.value})}function m(t){const{target:i}=t;i instanceof HTMLSelectElement&&we(j,{...a(),processRange:Number(i.value.slice(0,-1))})}O(()=>n(),()=>{(async()=>{var h;if(!n())return;const t=(h=n())==null?void 0:h[0];let i=new Set,o=new Set;for await(let[g,w]of t==null?void 0:t.entries())if(w.kind==="directory"&&!w.name.startsWith("original")){i.add(g);for await(let[E,y]of w.entries()){if(y.kind!=="file")continue;const f=E.match(/(\d+)(\.\w+)$/),u=f?Number(f[1]):null;u&&o.add(u)}}M(d,[...i]),M(l,[...o].toSorted((g,w)=>g-w))})()}),fe(),re();var b=or(),c=I(k(b),4);B(c,5,()=>p(d),q,(t,i)=>{var o=nr(),h={},g=k(o,!0);x(o),F(()=>{h!==(h=p(i))&&(o.value=(o.__value=p(i))==null?"":p(i)),z(g,p(i))}),$(t,o)}),x(c);var v=I(c,6);B(v,5,()=>p(l),q,(t,i)=>{var o=ir(),h=k(o);x(o),F(()=>z(h,`${p(i)??""}枚`)),$(t,o)}),x(v),x(b),le("input",c,_),le("input",v,m),$(s,b),ae()}var cr=T("<p> </p>"),dr=T('<div class="flex items-center gap-x-4"><button class="border-2 p-2 transition hover:border-blue-700 hover:bg-blue-500 hover:text-white">ディレクトリを開く</button> <!></div>');function fr(s,e){te(e,!1);let r=C();async function n(){if(!window.showDirectoryPicker){alert("window.showDirectoryPickerが使用できません");return}if(M(r,await window.showDirectoryPicker()),!p(r)){alert("window.showDirectoryPickerがundefinedを返しました．ディレクトリを開けません");return}let m=[];for await(let b of p(r).values())b.kind==="directory"&&m.push(b);pe.set(m)}re();var a=dr(),d=k(a),l=I(d,2);{var _=m=>{var b=cr(),c=k(b);x(b),F(()=>z(c,`開いたディレクトリ: ${p(r).name??""}`)),$(m,b)};ue(l,m=>{p(r)&&m(_)})}x(a),le("click",d,n),$(s,a),ae()}class A{constructor(e,r,n){W(this,"distance");W(this,"bgTemp");W(this,"flow");this.distance=e,this.bgTemp=r,this.flow=n}encodeString(){return`${this.distance}_${this.bgTemp}_${this.flow}`}static decodeString(e){const[r,n,a]=e.split("_");return new A(r,n,a)}static parseDirName(e){let r="",n="(不明)",a="(噴射なし)";const d=/([0-9.]+)(℃|L|m|Ｌ|ｍ)/g;let l;for(;(l=d.exec(e))!==null;){const _=parseFloat(l[1]),m=this.convertFull2Half(l[2]);switch(m){case"℃":n=`${_}${m}`;break;case"L":a=`${_}${m}`;break;case"m":r=`${_}${m}`;break}}return new A(r,n,a)}static convertFull2Half(e){switch(e){case"Ｌ":return"L";case"ｍ":return"m";default:return e}}}var vr=T('<img class="border border-black" alt="processed image">'),ur=T('<div class="flex items-center justify-center"><span>N/A</span></div>'),pr=T('<div class="p-1"><!></div>');function _r(s,e){te(e,!1);const r=ve(),n=()=>ee(j,"$imageType",r);let a=je(e,"directory",8),d=C();O(()=>(We(a()),n()),()=>{(async()=>{var v;const c=await((v=a())==null?void 0:v.getDirectoryHandle(n().kind));if(!(!c||c.kind!=="directory")){for await(let[t,i]of c)if(t.match(new RegExp(`(${n().processRange})(.\\w+$)`))){if(i.kind!=="file")continue;const o=await i.getFile(),h=new FileReader;h.onload=()=>{typeof h.result=="string"&&M(d,h.result)},o&&h.readAsDataURL(o);break}console.log("complete")}})()}),fe(),re();var l=pr(),_=k(l);{var m=c=>{var v=vr();F(()=>ar(v,"src",p(d))),$(c,v)},b=c=>{var v=ur();$(c,v)};ue(_,c=>{a()?c(m):c(b,!1)})}x(l),$(s,l),ae()}var mr=T('<td class="border-collapse border border-black p-4"> </td>'),br=T('<td class="border-collapse border border-black"><!></td>'),hr=T('<tr class="border-collapse border"><td class="border-collapse border border-black p-4"> </td><!></tr>'),gr=T('<h3 class="mb-4 mt-6 text-2xl"> </h3> <table class="w-full table-auto table-fixed border-collapse border border-black"><colgroup><col style="width: 60px;"></colgroup><thead><tr class="border-collapse border border-black"><td class="border-collapse border border-black"></td><!></tr></thead><tbody></tbody></table>',1);function wr(s,e){te(e,!1);const r=ve(),n=()=>ee(pe,"$sceneEntries",r),a=C(),d=C(),l=C(),_=C();O(()=>(n(),A),()=>{var v;M(a,new Map((v=n())==null?void 0:v.map(t=>[A.parseDirName(t.name).encodeString(),t])))}),O(()=>(p(a),A),()=>{var v;M(d,[...new Set((v=p(a))==null?void 0:v.keys().map(t=>A.decodeString(t).bgTemp))])}),O(()=>(p(a),A),()=>{var v;M(l,[...new Set((v=p(a))==null?void 0:v.keys().map(t=>A.decodeString(t).flow))].toSorted())}),O(()=>(p(a),A),()=>{var v;M(_,[...new Set((v=p(a))==null?void 0:v.keys().map(t=>A.decodeString(t).distance))])}),fe(),re();var m=_e(),b=oe(m);{var c=v=>{var t=_e(),i=oe(t);B(i,1,()=>p(d),q,(o,h)=>{var g=gr(),w=oe(g),E=k(w);x(w);var y=I(w,2),f=I(k(y)),u=k(f),U=I(k(u));B(U,1,()=>p(l),q,(S,P)=>{var N=mr(),D=k(N,!0);x(N),F(()=>z(D,p(P))),$(S,N)}),x(u),x(f);var L=I(f);B(L,5,()=>p(_),q,(S,P)=>{var N=hr(),D=k(N),V=k(D,!0);x(D);var se=I(D);B(se,1,()=>p(l),q,(J,X)=>{var K=br(),G=k(K),Q=Ze(()=>p(a).get(new A(p(P),p(h),p(X)).encodeString()));_r(G,{get directory(){return p(Q)}}),x(K),$(J,K)}),x(N),F(()=>z(V,p(P))),$(S,N)}),x(L),x(y),F(()=>z(E,`背面温度${p(h)??""}`)),$(o,g)}),$(v,t)};ue(b,v=>{n()!=null&&v(c)})}$(s,m),ae()}var xr=T('<div class="p-4"><h1 class="mb-4 mt-8 text-4xl">ガス前処理 結果をまとめて表示するやつ</h1> <p>ガスIR画像の前処理結果をまとめて表示します</p> <h2 class="mb-4 mt-8 text-3xl">ディレクトリを選択</h2> <p>表示対象の画像が含まれるディレクトリを選択します．</p> <div class="mt-4"><!></div> <h2 class="mb-4 mt-8 text-3xl">表示対象の選択</h2> <p>表示対象を選択します．処理に用いた画像数を指定します．</p> <div class="mt-4"><!></div> <h2 class="mb-4 mt-8 text-3xl">結果一覧</h2> <div class="mt-4"><!></div></div>');function Nr(s){var e=xr(),r=I(k(e),8),n=k(r);fr(n,{}),x(r);var a=I(r,6),d=k(a);lr(d,{}),x(a);var l=I(a,4),_=k(l);wr(_,{}),x(l),x(e),$(s,e)}export{Nr as component};
